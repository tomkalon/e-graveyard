{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block body %}
    {% if search_result %}
        <div class="container py-4">
            <div class="lead mb-4">Wyniki wyszukiwania:</div>
            <small class="">Wybierz, by zobaczyć szczegóły:</small>
            <hr>
            <table class="table table-striped table-hover">
                <thead>
                <tr class="text-center text-lg-start">
                    <th class="col-3">Imię</th>
                    <th class="col-3">Nazwisko</th>
                    <th class="col-2">Data urodzenia</th>
                    <th class="col-2">Data śmierci</th>
                </tr>
                </thead>
                <tbody class="">
                {% for person in search_result %}
                    <tr class="text-center text-lg-start" role="button" onclick="{{ path('app_person') }}">
                        <td class="col-3">{{ person.surname }}</td>
                        <td class="col-3">{{ person.name }}</td>
                        <td class="col-2">{{ person.born|date('Y-m-d') }}</td>
                        <td class="col-2">{{ person.death|date('Y-m-d') }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <hr>
            <div class="row">
                <div class="col">
                    <small>Znaleziono <b>{{ search_result|length }}</b> pasujących wyników.</small>
                </div>
            </div>
            <hr>
            <div class="">
                <button type="button" class="btn btn-success" onclick="location.href='{{ path('app_search') }}'">Wyszukaj ponownie</button>
            </div>
        </div>
    {% else %}
        {% for failed in app.flashes('failed')|slice(0, 1) %}
            <div class="container mt-4 alert alert-danger">
                {{ failed }}
            </div>
        {% endfor %}
        <div class="container py-4">
            <h3 class="text-uppercase">Wyszukiwanie grobów</h3>
            <div class="lead">Wyszukiwanie poprzez wpisanie imienia i nazwiska (pole obowiązkowe), a także daty urodzenia i
                śmierci:
            </div>
            <hr>
            <div class="form mt-3 overflow-hidden">
                {{ form_start(form) }}

                {% if form.alert is defined %}
                    <div class="alert alert-danger" role="alert">
                        {{ form_errors(form) }}
                    </div>
                {% endif %}

                <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-2">
                    <div class="col">
                        {{ form_label(form.surname, null, {
                            'label': 'Imię'
                        }) }}
                        {{ form_widget(form.surname,{
                            'attr': {'class': ''}
                        }) }}
                    </div>
                    <div class="col">
                        {{ form_label(form.name, null, {
                            'label': 'Nazwisko*'
                        }) }}
                        {{ form_widget(form.name,{
                            'attr': {'class': ''}
                        }) }}
                    </div>
                </div>
                <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-2">
                    <div class="col">
                        {{ form_label(form.born, null, {
                            'label': 'Data urodzenia'
                        }) }}
                        {{ form_widget(form.born,{
                            'attr': {'class': ''}
                        }) }}
                    </div>
                    <div class="col">
                        {{ form_label(form.death, null, {
                            'label': 'Data śmierci'
                        }) }}
                        {{ form_widget(form.death,{
                            'attr': {'class': ''}
                        }) }}
                    </div>
                </div>

                <div class="mt-3 float-end float-xl-start">
                    {{ form_widget(form.search,{
                        'attr': {'class': 'btn btn-success'},
                        'label': 'Wyszukaj'
                    }) }}
                </div>
                {{ form_end(form) }}
            </div>
            <hr>
            <div class="lead">Wyszukiwanie po wskazaniu przedziału dat urodzenia lub dat śmierci:</div>
        </div>
    {% endif %}
{% endblock %}
